h2 Create a group

= link_to 'Create a New Session', new_admin_group_path 


= bootstrap_form_for @group,  url: admin_groups_path(@group) do |f|
  .col-md-6
    #power-search-random-group-div
      p
        b Select Students
      = select_tag "groups", nil, id: 'power-search-random-group', class: "select-example-3", multiple: true
      br
      br
    = f.submit 'Done'




javascript:

  $(document).ready(function(){
    $('.wysihtml5').each(function(i, elem) {
      $(elem).wysihtml5({
        toolbar: {
          "link": true
        }
      });
    });
    $('[data-wysihtml5-dialog]').on('hidden.bs.modal', function(){
      $('.modal-backdrop').remove();
    })
  })

  $(document).ready(function(){
    $(".select-example-2").select2({
      maximumSelectionLength: 1,
      placeholder: "Select Group",
      createTag: function (params) {
        return {
          id: params.term,
          text: params.term,
          newOption: true
        }
      },
      ajax: {
        url: "/admin/groups",
        dataType: 'json',
        delay: 250,
        data: function (params) {
          return {
            q: params.term, // search term
            page: params.page
          };
        },
        processResults: function (data, params) {
          return { results: $.map( data, function(client, i) {
              var displayResult = client.name 
                  return { id: client.id, text: displayResult}
              } ) };          
        }
      },
    });
  });
  
  $(document).ready(function(){
    $(".select-example-3").select2({
      maximumSelectionLength: 10,
      placeholder: "Select Student",
      createTag: function (params) {
        return {
          id: params.term,
          text: params.term,
          newOption: false
        }
      },
      ajax: {
        url: "/admin/users/select2_list_student.json",
        dataType: 'json',
        delay: 250,
        data: function (term) {
          return {
              term: term
          };
        },
        processResults: function (data) {
          var results = [];
          $.each(data, function(index, item){
            var name = item.english_name + ' ' + item.last_name + ' (' + item.school + ')'
            results.push({
              id: item.id,
              text: name
            });
          });
          return {
              results: results
          };
        }
        // processResults: function (data, params) {
        //   // return { results: $.map( data, function(client, i) {
        //   //     var displayResult = client.first_name + ' ' + client.last_name 
        //   //         return { id: client.id, text: displayResult}
        //   //     } ) }; 
        //   console.log(data.matches)
        //   return { 
        //     // Select2 requires an id, so we need to map the results and add an ID
        //     // You could instead include an id in the tsv you add to soulheart ;)
        //     results: data.matches.map(function(item) {
        //       //var textToDisplay = item.category + ": " + item.text
        //       return {
        //         id: item.id,
        //         text: item.first_name
        //       };
        //     }),
        //     pagination: {
        //       // If there are 10 matches, there's at least another page
        //       more: data.matches.length === 10
        //     }
        //   };         
        // }
      },
    });
  });

